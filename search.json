[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "A simulation of bias introduced by missing confounder data",
    "section": "",
    "text": "Description",
    "crumbs": [
      "Description"
    ]
  },
  {
    "objectID": "index.html#objective",
    "href": "index.html#objective",
    "title": "A simulation of bias introduced by missing confounder data",
    "section": "Objective",
    "text": "Objective\nThe objective of this repository is to flexibly simulate de novo datasets with different missingness scenarios. The simulated datasets approximate the distributions of the empirical cohort used in the HDMI project.",
    "crumbs": [
      "Description"
    ]
  },
  {
    "objectID": "index.html#sec-dependencies",
    "href": "index.html#sec-dependencies",
    "title": "A simulation of bias introduced by missing confounder data",
    "section": "Dependencies",
    "text": "Dependencies\nThis is a quarto project and R package dependencies are managed through the renv package. All packages and their versions can be viewed in the lockfile renv.lock. All required packages and the appropriate versions can be installed by running the following command:\n\n\nShow the code\nrenv::restore()\n\n\n\n\n\n\n\n\nImportant\n\n\n\nThe dependencies are managed through Posit’s repository package manager (RSPM) version for your underlying OS distribution. If you use a different operating system than MacOS, please head over to the RSPM setup website and follow these steps:\n\nGo to the RSPM setup website\nChoose the operating system (if Linux, also choose the Linux distribution)\nGo to Repository URL: and copy-paste the URL to the options statement in the .Rprofile file\noptions(repos = c(REPO_NAME = “URL”))",
    "crumbs": [
      "Description"
    ]
  },
  {
    "objectID": "index.html#reproducibility",
    "href": "index.html#reproducibility",
    "title": "A simulation of bias introduced by missing confounder data",
    "section": "Reproducibility",
    "text": "Reproducibility\nFollow these steps in RStudio to reproduce this study:\n\n\n\n\n\n\nNote\n\n\n\n\nInstall all necessary dependencies (see above)\nIn RStudio, run all scripts via quarto render or Build &gt; Render Book (make sure quarto is installed)",
    "crumbs": [
      "Description"
    ]
  },
  {
    "objectID": "index.html#repository-structure-and-files",
    "href": "index.html#repository-structure-and-files",
    "title": "A simulation of bias introduced by missing confounder data",
    "section": "Repository structure and files",
    "text": "Repository structure and files\n\nDirectory overview\n\n\n.\n├── README.md\n├── _quarto.yml\n├── cc_bias_simulation.Rproj\n├── doc\n│   ├── index.html\n│   ├── robots.txt\n│   ├── scripts\n│   ├── search.json\n│   ├── site_libs\n│   └── sitemap.xml\n├── functions\n│   ├── format_methods.R\n│   ├── generate_NA_cont.R\n│   ├── generate_NA_discrete.R\n│   ├── generate_data.R\n│   ├── ps_analysis_mids.R\n│   ├── rsimsum_ggplot.R\n│   └── run_simulation.R\n├── index.qmd\n├── index.rmarkdown\n├── public\n│   ├── index.html\n│   ├── robots.txt\n│   ├── scripts\n│   ├── search.json\n│   ├── site_libs\n│   └── sitemap.xml\n├── renv\n│   ├── activate.R\n│   ├── library\n│   └── settings.json\n├── renv.lock\n├── scripts\n│   ├── 01_data_generation.qmd\n│   ├── 02_missingness_generation.qmd\n│   ├── 03_run_simulation.html.md\n│   ├── 03_run_simulation.md\n│   ├── 03_run_simulation.qmd\n│   └── 03_run_simulation_files\n├── site_libs\n│   ├── bootstrap\n│   ├── clipboard\n│   ├── crosstalk-1.2.1\n│   ├── htmltools-fill-0.5.8.1\n│   ├── htmlwidgets-1.6.4\n│   ├── jquery-3.5.1\n│   ├── plotly-binding-4.10.4\n│   ├── plotly-htmlwidgets-css-2.11.1\n│   ├── plotly-main-2.11.1\n│   ├── quarto-html\n│   ├── quarto-nav\n│   ├── quarto-search\n│   └── typedarray-0.1\n└── update_README.R\n\n\n\n.Rprofile - defines paths, activates renv, options for Posit R package manager\nscripts - main R/RMarkdown scripts\nfunctions - helper functions called in scripts\nrenv/renv.lock - renv directories to manage R dependencies and versions used in this simulation\ndocs - output of Quarto scripts\nREADME - essential information about the project (README.Rmd renders to README.md via update_README.R after each quarto render command)",
    "crumbs": [
      "Description"
    ]
  },
  {
    "objectID": "scripts/01_data_generation.html",
    "href": "scripts/01_data_generation.html",
    "title": "1  Data generation",
    "section": "",
    "text": "2 Objective\nThe objective of this repository is to simulate a dataset with few missingness scenarios and evaluate bias for an unadjusted analysis, complete case analysis and analysis including imputed data after propensity score matching.\nThe first step involves the generation of a complete dataset with realistic distributions and associations between covariates, which is showcased here.",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Data generation</span>"
    ]
  },
  {
    "objectID": "scripts/01_data_generation.html#generate-data-using-generate_data-function",
    "href": "scripts/01_data_generation.html#generate-data-using-generate_data-function",
    "title": "1  Data generation",
    "section": "3.1 Generate data using generate_data() function",
    "text": "3.1 Generate data using generate_data() function\nWe first create simulated data that approximates the covariate distributions in the observed empirical cohort.\n\n\nShow the code\n# data generating step\nsource(here::here(\"functions\", \"generate_data.R\"))\n\ncohort &lt;- generate_data(\n  seed = 42, \n  n_total = n_total\n  )\n\ncohort |&gt; \n  glimpse()\n\n\nRows: 10,000\nColumns: 17\n$ X                      &lt;int&gt; 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1, 1, 0,…\n$ Z2                     &lt;dbl&gt; 0.6153516, 0.6765416, 0.8913081, 0.6161119, 0.7…\n$ U                      &lt;int&gt; 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0,…\n$ c_ed                   &lt;dbl&gt; 0.546994461, -0.255923198, 2.759562171, 0.40503…\n$ c_gnrc_cnt             &lt;dbl&gt; 13.692274, 5.448430, 7.034793, 16.137476, 6.140…\n$ c_flu_vaccine          &lt;int&gt; 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 1, 0,…\n$ c_foot_ulcer           &lt;int&gt; 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ c_glaucoma_or_cataract &lt;int&gt; 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1,…\n$ c_ischemic_stroke      &lt;int&gt; 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ c_h2ra                 &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ c_acei                 &lt;int&gt; 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0,…\n$ c_arb                  &lt;int&gt; 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ c_statin               &lt;int&gt; 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 1,…\n$ c_spironolocatone      &lt;int&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ dem_age                &lt;dbl&gt; 75.73247, 73.64546, 63.07144, 71.97991, 86.9776…\n$ eventtime              &lt;dbl&gt; 10.00000000, 10.00000000, 10.00000000, 10.00000…\n$ status                 &lt;int&gt; 0, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0,…\n\n\n\n3.1.1 Table 1 by exposure\nDisplay covariate distributions by exposure.\n\n\nShow the code\ncohort |&gt; \n  tbl_summary(by = X) |&gt; \n  add_difference()\n\n\n\n\nTable 3.1: Covariate distributions by exposure.\n\n\n\n\n\n\n\n\n\nCharacteristic\n0, N = 3,2131\n1, N = 6,7871\nDifference2\n95% CI2,3\np-value2\n\n\n\n\nZ2\n0.85 (0.69, 1.00)\n0.82 (0.66, 0.98)\n0.03\n0.02, 0.04\n&lt;0.001\n\n\nU\n366 (11%)\n1,381 (20%)\n-9.0%\n-10%, -7.5%\n&lt;0.001\n\n\nc_ed\n1.01 (-1.02, 2.94)\n1.00 (-0.37, 2.33)\n-0.03\n-0.15, 0.08\n0.6\n\n\nc_gnrc_cnt\n9.8 (6.5, 13.1)\n11.0 (7.6, 14.3)\n-1.2\n-1.4, -0.95\n&lt;0.001\n\n\nc_flu_vaccine\n2,068 (64%)\n4,340 (64%)\n0.42%\n-1.6%, 2.5%\n0.7\n\n\nc_foot_ulcer\n76 (2.4%)\n337 (5.0%)\n-2.6%\n-3.4%, -1.8%\n&lt;0.001\n\n\nc_glaucoma_or_cataract\n1,768 (55%)\n3,573 (53%)\n2.4%\n0.27%, 4.5%\n0.027\n\n\nc_ischemic_stroke\n297 (9.2%)\n929 (14%)\n-4.4%\n-5.8%, -3.1%\n&lt;0.001\n\n\nc_h2ra\n235 (7.3%)\n450 (6.6%)\n0.68%\n-0.42%, 1.8%\n0.2\n\n\nc_acei\n998 (31%)\n2,198 (32%)\n-1.3%\n-3.3%, 0.65%\n0.2\n\n\nc_arb\n527 (16%)\n1,258 (19%)\n-2.1%\n-3.7%, -0.53%\n0.010\n\n\nc_statin\n1,964 (61%)\n3,884 (57%)\n3.9%\n1.8%, 6.0%\n&lt;0.001\n\n\nc_spironolocatone\n53 (1.6%)\n179 (2.6%)\n-0.99%\n-1.6%, -0.38%\n0.003\n\n\ndem_age\n75 (70, 80)\n76 (71, 81)\n-0.99\n-1.3, -0.68\n&lt;0.001\n\n\neventtime\n10.00 (8.49, 10.00)\n10.00 (6.61, 10.00)\n0.35\n0.23, 0.48\n&lt;0.001\n\n\nstatus\n913 (28%)\n2,316 (34%)\n-5.7%\n-7.7%, -3.8%\n&lt;0.001\n\n\n\n1 Median (IQR); n (%)\n\n\n2 Welch Two Sample t-test; Two sample test for equality of proportions\n\n\n3 CI = Confidence Interval\n\n\n\n\n\n\n\n\n\n\n\n\n\n3.1.2 Odds ratios\nOdds rations for the strength of association between covariates and exposure.\n\n\nShow the code\nodds &lt;- stats::glm(\n  formula = paste0(\"X ~ \", paste0(names(cohort |&gt; select(-c(X, eventtime, status))), collapse = \" + \")),\n  data = cohort,\n  family = \"binomial\"\n  )\n\nodds |&gt; \n  gtsummary::tbl_regression(exponentiate = T)\n\n\n\n\nTable 3.2: Odds rations for the strength of association between covariates and exposure.\n\n\n\n\n\n\n\n\n\nCharacteristic\nOR1\n95% CI1\np-value\n\n\n\n\nZ2\n0.54\n0.45, 0.65\n&lt;0.001\n\n\nU\n2.01\n1.77, 2.28\n&lt;0.001\n\n\nc_ed\n1.01\n0.99, 1.03\n0.5\n\n\nc_gnrc_cnt\n1.05\n1.04, 1.06\n&lt;0.001\n\n\nc_flu_vaccine\n0.97\n0.89, 1.06\n0.5\n\n\nc_foot_ulcer\n2.18\n1.70, 2.84\n&lt;0.001\n\n\nc_glaucoma_or_cataract\n0.89\n0.82, 0.97\n0.010\n\n\nc_ischemic_stroke\n1.57\n1.36, 1.81\n&lt;0.001\n\n\nc_h2ra\n0.91\n0.77, 1.07\n0.2\n\n\nc_acei\n1.05\n0.95, 1.15\n0.3\n\n\nc_arb\n1.16\n1.04, 1.30\n0.010\n\n\nc_statin\n0.85\n0.78, 0.93\n&lt;0.001\n\n\nc_spironolocatone\n1.54\n1.13, 2.12\n0.007\n\n\ndem_age\n1.02\n1.01, 1.02\n&lt;0.001\n\n\n\n1 OR = Odds Ratio, CI = Confidence Interval",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Data generation</span>"
    ]
  },
  {
    "objectID": "scripts/01_data_generation.html#generate-outcome",
    "href": "scripts/01_data_generation.html#generate-outcome",
    "title": "1  Data generation",
    "section": "3.2 Generate outcome",
    "text": "3.2 Generate outcome\nGenerate the outcome with a desired event rate of ~40 events/1,000 person-years of follow-up.\n\n\nShow the code\n# event-rate per 1000 person-years of follow-up\n# in original data: ~40 events per 1000 person-years\nevent_rate_per_1000py &lt;- round(sum(cohort$status)/sum(cohort$eventtime)*1000, 2)\n\n\n\nResulting/simulated event rate per 1,000 person-years: 39.26",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Data generation</span>"
    ]
  },
  {
    "objectID": "scripts/01_data_generation.html#survival",
    "href": "scripts/01_data_generation.html#survival",
    "title": "1  Data generation",
    "section": "3.3 Survival",
    "text": "3.3 Survival\n\n\nShow the code\nkm_exposure &lt;- survfit2(formula = survival::Surv(eventtime, status) ~ X, data = cohort)\n\nggsurvfit(\n  x = km_exposure, \n  type = \"survival\",\n  linewidth = 1\n  ) +\n  add_confidence_interval() +\n  add_pvalue(caption = \"Log-rank {p.value}\")\n\n\n\n\n\n\n\n\nFigure 3.1: Kaplan-Meier plot (unadjusted) by exposure.\n\n\n\n\n\nNext, let’s compute the univariate and multivariate beta coefficients (hazard ratios [HR]).\n\nBeta unadjusted:\n\n\n\nShow the code\ncox_fit_unadjusted &lt;- survival::coxph(formula = Surv(eventtime, status) ~ X, data = cohort)\n\ncox_fit_unadjusted |&gt;  \n  gtsummary::tbl_regression(exponentiate = T)\n\n\n\n\nTable 3.3: Univariate hazard ratio.\n\n\n\n\n\n\n\n\n\nCharacteristic\nHR1\n95% CI1\np-value\n\n\n\n\nX\n1.25\n1.16, 1.35\n&lt;0.001\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval\n\n\n\n\n\n\n\n\n\n\n\n\nBeta adjusted:\n\n\n\nShow the code\nlhs &lt;- \"Surv(eventtime, status)\"\nrhs &lt;- paste0(colnames(cohort |&gt; select(-c(eventtime, status))), collapse = \" + \")\ncox_form &lt;- as.formula(paste0(lhs, \"~\", rhs))\n\ncox_fit_adjusted &lt;- survival::coxph(formula = cox_form, data = cohort)\n\ncox_fit_adjusted |&gt;  \n  gtsummary::tbl_regression(exponentiate = T)\n\n\n\n\nTable 3.4: Multivariate hazard ratio.\n\n\n\n\n\n\n\n\n\nCharacteristic\nHR1\n95% CI1\np-value\n\n\n\n\nX\n1.03\n0.96, 1.12\n0.4\n\n\nZ2\n5.42\n4.66, 6.31\n&lt;0.001\n\n\nU\n1.43\n1.32, 1.56\n&lt;0.001\n\n\nc_ed\n1.04\n1.02, 1.05\n&lt;0.001\n\n\nc_gnrc_cnt\n1.08\n1.07, 1.09\n&lt;0.001\n\n\nc_flu_vaccine\n0.83\n0.77, 0.89\n&lt;0.001\n\n\nc_foot_ulcer\n2.07\n1.80, 2.38\n&lt;0.001\n\n\nc_glaucoma_or_cataract\n0.77\n0.72, 0.82\n&lt;0.001\n\n\nc_ischemic_stroke\n1.51\n1.37, 1.66\n&lt;0.001\n\n\nc_h2ra\n0.67\n0.57, 0.78\n&lt;0.001\n\n\nc_acei\n1.36\n1.26, 1.46\n&lt;0.001\n\n\nc_arb\n1.40\n1.29, 1.52\n&lt;0.001\n\n\nc_statin\n0.85\n0.79, 0.91\n&lt;0.001\n\n\nc_spironolocatone\n1.67\n1.38, 2.03\n&lt;0.001\n\n\ndem_age\n1.05\n1.04, 1.05\n&lt;0.001\n\n\n\n1 HR = Hazard Ratio, CI = Confidence Interval",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Data generation</span>"
    ]
  },
  {
    "objectID": "scripts/01_data_generation.html#session-info",
    "href": "scripts/01_data_generation.html#session-info",
    "title": "1  Data generation",
    "section": "3.4 Session info",
    "text": "3.4 Session info\nScript runtime: minutes.\n\nLoaded packagesSession infoRepositories\n\n\n\n\nShow the code\npander::pander(subset(data.frame(sessioninfo::package_info()), attached==TRUE, c(package, loadedversion)))\n\n\n\n\n\n\n\n\n\n\n \npackage\nloadedversion\n\n\n\n\narrow\narrow\n14.0.0.2\n\n\ndplyr\ndplyr\n1.1.4\n\n\nggplot2\nggplot2\n3.4.4\n\n\nggsurvfit\nggsurvfit\n1.0.0\n\n\ngtsummary\ngtsummary\n1.7.2\n\n\nhere\nhere\n1.0.1\n\n\nsimsurv\nsimsurv\n1.0.0\n\n\nsurvival\nsurvival\n3.5-8\n\n\ntibble\ntibble\n3.2.1\n\n\n\n\n\n\n\n\n\nShow the code\npander::pander(sessionInfo())\n\n\nR version 4.4.0 (2024-04-24)\nPlatform: x86_64-pc-linux-gnu\nlocale: LC_CTYPE=C.UTF-8, LC_NUMERIC=C, LC_TIME=C.UTF-8, LC_COLLATE=C.UTF-8, LC_MONETARY=C.UTF-8, LC_MESSAGES=C.UTF-8, LC_PAPER=C.UTF-8, LC_NAME=C, LC_ADDRESS=C, LC_TELEPHONE=C, LC_MEASUREMENT=C.UTF-8 and LC_IDENTIFICATION=C\nattached base packages: stats, graphics, grDevices, datasets, utils, methods and base\nother attached packages: arrow(v.14.0.0.2), here(v.1.0.1), gtsummary(v.1.7.2), ggplot2(v.3.4.4), ggsurvfit(v.1.0.0), survival(v.3.5-8), dplyr(v.1.1.4), simsurv(v.1.0.0) and tibble(v.3.2.1)\nloaded via a namespace (and not attached): gtable(v.0.3.4), xfun(v.0.41), htmlwidgets(v.1.6.4), lattice(v.0.22-5), vctrs(v.0.6.5), tools(v.4.4.0), generics(v.0.1.3), fansi(v.1.0.6), pkgconfig(v.2.0.3), Matrix(v.1.6-4), assertthat(v.0.2.1), gt(v.0.10.1), lifecycle(v.1.0.4), compiler(v.4.4.0), farver(v.2.1.1), stringr(v.1.5.1), tictoc(v.1.2), munsell(v.0.5.0), htmltools(v.0.5.7), sass(v.0.4.8), yaml(v.2.3.8), pillar(v.1.9.0), tidyr(v.1.3.1), ellipsis(v.0.3.2), broom.helpers(v.1.14.0), sessioninfo(v.1.2.2), commonmark(v.1.9.1), tidyselect(v.1.2.0), digest(v.0.6.33), stringi(v.1.8.3), purrr(v.1.0.2), pander(v.0.6.5), labeling(v.0.4.3), forcats(v.1.0.0), splines(v.4.4.0), labelled(v.2.12.0), rprojroot(v.2.0.4), fastmap(v.1.1.1), grid(v.4.4.0), colorspace(v.2.1-0), cli(v.3.6.2), magrittr(v.2.0.3), utf8(v.1.2.4), broom(v.1.0.5), withr(v.3.0.0), scales(v.1.3.0), backports(v.1.4.1), bit64(v.4.0.5), rmarkdown(v.2.28), bit(v.4.0.5), hms(v.1.1.3), evaluate(v.0.23), knitr(v.1.45), haven(v.2.5.4), markdown(v.1.12), rlang(v.1.1.2), Rcpp(v.1.0.12), glue(v.1.6.2), xml2(v.1.3.6), renv(v.1.0.3), jsonlite(v.1.8.8) and R6(v.2.5.1)\n\n\n\n\n\n\nShow the code\npander::pander(options('repos'))\n\n\n\nrepos:\n\n\n\n\n\n\nREPO_NAME\n\n\n\n\nhttps://packagemanager.posit.co/cran/latest",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Data generation</span>"
    ]
  },
  {
    "objectID": "scripts/02_missingness_generation.html",
    "href": "scripts/02_missingness_generation.html",
    "title": "2  Missingness generation",
    "section": "",
    "text": "2.1 Objective\nIn this section, we detail the process with which the mice::ampute function is used to impose missingness on one or multiple pre-specified variables. For this example, let…\nWe also simulate all other covariates of the substantive model with their approximate distributions as observed in the empirical claims-EHR linked dataset.\nShow the code\nsource(here::here(\"functions\", \"generate_data.R\"))\n\ncohort &lt;- generate_data(\n  seed = 42, \n  n_total = n_total\n  )\n\n#| label: tbl-tbl1\n#| tbl-cap: \"Covariate distributions by exposure.\"\n\ncohort |&gt; \n  select(-c(eventtime, status)) |&gt; \n  tbl_summary(by = X) |&gt; \n  add_difference()\n\n\n\n\n\n\n\n\nCharacteristic\n0, N = 8061\n1, N = 1,6941\nDifference2\n95% CI2,3\np-value2\n\n\n\n\nZ2\n0.86 (0.69, 1.02)\n0.81 (0.66, 0.97)\n0.04\n0.02, 0.06\n&lt;0.001\n\n\nU\n106 (13%)\n332 (20%)\n-6.4%\n-9.5%, -3.4%\n&lt;0.001\n\n\nc_ed\n0.99 (-0.98, 3.10)\n0.94 (-0.42, 2.34)\n0.09\n-0.14, 0.32\n0.5\n\n\nc_gnrc_cnt\n10.1 (6.3, 13.3)\n11.1 (7.6, 14.4)\n-1.2\n-1.7, -0.80\n&lt;0.001\n\n\nc_flu_vaccine\n517 (64%)\n1,048 (62%)\n2.3%\n-1.9%, 6.4%\n0.3\n\n\nc_foot_ulcer\n16 (2.0%)\n75 (4.4%)\n-2.4%\n-3.9%, -0.98%\n0.003\n\n\nc_glaucoma_or_cataract\n415 (51%)\n860 (51%)\n0.72%\n-3.6%, 5.0%\n0.8\n\n\nc_ischemic_stroke\n74 (9.2%)\n243 (14%)\n-5.2%\n-7.9%, -2.5%\n&lt;0.001\n\n\nc_h2ra\n65 (8.1%)\n122 (7.2%)\n0.86%\n-1.5%, 3.2%\n0.5\n\n\nc_acei\n270 (33%)\n545 (32%)\n1.3%\n-2.7%, 5.4%\n0.5\n\n\nc_arb\n123 (15%)\n291 (17%)\n-1.9%\n-5.1%, 1.2%\n0.3\n\n\nc_statin\n476 (59%)\n942 (56%)\n3.4%\n-0.78%, 7.7%\n0.11\n\n\nc_spironolocatone\n14 (1.7%)\n32 (1.9%)\n-0.15%\n-1.4%, 1.1%\n&gt;0.9\n\n\ndem_age\n75 (70, 80)\n76 (71, 81)\n-0.77\n-1.4, -0.15\n0.014\n\n\n\n1 Median (IQR); n (%)\n\n\n2 Welch Two Sample t-test; Two sample test for equality of proportions\n\n\n3 CI = Confidence Interval\nLet’s further assume that we want to simulate missingness only in \\(Z2\\). The corresponding missingness indicator for \\(Z2\\) is denoted as \\(M_{Z2}\\).\nGenerally, the mice::ampute allows to simulate complex multivariate missingness patterns and mechanisms. For example, multiple different patterns with different underlying frequencies/prevalences and missingness mechanisms can be simulated. Pattern in this context if defined as a combination of missingness on specific variables while other variables remain complete.\nFor this example, we just consider a single missingness pattern for \\(M2\\), for which, simply speaking, the probability for \\(M_{Z2}\\) is imposed using the covariate values Z2 and U.\n\\[Pr(M_{Z2}|Z2,U) = Z2 + U\\] The detailed steps are illustrated in the following.",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Missingness generation</span>"
    ]
  },
  {
    "objectID": "scripts/02_missingness_generation.html#objective",
    "href": "scripts/02_missingness_generation.html#objective",
    "title": "2  Missingness generation",
    "section": "",
    "text": "\\(X\\) be a binary exposure\n\\(Y\\) be a time-to-event outcome with the follow-up time until event or censoring (eventtime) and event indicator (status)\n\\(Z2\\) be continuous confounder\n\\(U\\) be a binary prognostic factor (associated with outcome but not exposure)",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Missingness generation</span>"
    ]
  },
  {
    "objectID": "scripts/02_missingness_generation.html#step-1-assigning-a-missingness-pattern",
    "href": "scripts/02_missingness_generation.html#step-1-assigning-a-missingness-pattern",
    "title": "2  Missingness generation",
    "section": "2.2 Step 1: Assigning a missingness pattern",
    "text": "2.2 Step 1: Assigning a missingness pattern\nIn a first step, we assign the missingness pattern. To that end, we create a vector with the length of the number of covariates that denotes which covariates should be become partially missing (denoted by a value of 0) and which should remain complete (denoted by a value of 1).\n\n\nShow the code\n# define column numbers for pattern and weight determination\ncol_Z2 &lt;- which(colnames(cohort) %in% \"Z2\")\ncol_U &lt;- which(colnames(cohort) %in% \"U\")\n\n# define missingness pattern\ndefault_pattern &lt;- rep(1, ncol(cohort))\npattern &lt;- replace(default_pattern, col_Z2, 0)\n\ntibble(\n  Variable = colnames(cohort),\n  Pattern = pattern\n  ) |&gt; \n  gt()\n\n\n\n\nTable 2.1: Assigned missingness pattern matrix.\n\n\n\n\n\n\n\n\n\nVariable\nPattern\n\n\n\n\nX\n1\n\n\nZ2\n0\n\n\nU\n1\n\n\nc_ed\n1\n\n\nc_gnrc_cnt\n1\n\n\nc_flu_vaccine\n1\n\n\nc_foot_ulcer\n1\n\n\nc_glaucoma_or_cataract\n1\n\n\nc_ischemic_stroke\n1\n\n\nc_h2ra\n1\n\n\nc_acei\n1\n\n\nc_arb\n1\n\n\nc_statin\n1\n\n\nc_spironolocatone\n1\n\n\ndem_age\n1\n\n\neventtime\n1\n\n\nstatus\n1\n\n\n\n\n\n\n\n\n\n\nAs you can see, only \\(Z2\\) was assigned a value of 0, indicating that we will impose missing only on this covariate.",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Missingness generation</span>"
    ]
  },
  {
    "objectID": "scripts/02_missingness_generation.html#step-2-assigning-weights",
    "href": "scripts/02_missingness_generation.html#step-2-assigning-weights",
    "title": "2  Missingness generation",
    "section": "2.3 Step 2: Assigning weights",
    "text": "2.3 Step 2: Assigning weights\nFor MAR and MNAR mechanisms, the probability of an individual \\(i\\) to have an observed or missing \\(Z2\\) is calculated using a weighted sum score. This calculation depends on the values of covariates which we define as predictors to impose missingness on \\(Z2\\) as well as pre-specified weights which are manipulated by the user through a vector or matrix. To that end, predictors will be assigned a non-zero value which indicates the weight this variable receives. For example, if \\(Z2 = 2\\) and \\(U = 1\\), \\(Z2's\\) influence would be twice as large as \\(U's\\) influence. The scale here is relative, which means that \\(Z2 = 2\\) and \\(U = 1\\) would be the same as \\(Z2 = 0.2\\) and \\(U = 0.8\\).\nIn this example, we assign weights of 0.2 and 0.8 to \\(Z2\\) and \\(U\\), respectively, which means that \\(U\\) has a larger weight.\n\n\nShow the code\ndefault_weights &lt;- rep(0, ncol(cohort))\n\n# replace the predictor columns with a 1 or non-zero value\nweights &lt;- replace(default_weights, c(col_Z2, col_U), c(0.2, 0.8))\n\ntibble(\n  Variable = colnames(cohort),\n  Weights = weights\n  ) |&gt; \n  gt()\n\n\n\n\nTable 2.2: Assigned missingness weights matrix.\n\n\n\n\n\n\n\n\n\nVariable\nWeights\n\n\n\n\nX\n0.0\n\n\nZ2\n0.2\n\n\nU\n0.8\n\n\nc_ed\n0.0\n\n\nc_gnrc_cnt\n0.0\n\n\nc_flu_vaccine\n0.0\n\n\nc_foot_ulcer\n0.0\n\n\nc_glaucoma_or_cataract\n0.0\n\n\nc_ischemic_stroke\n0.0\n\n\nc_h2ra\n0.0\n\n\nc_acei\n0.0\n\n\nc_arb\n0.0\n\n\nc_statin\n0.0\n\n\nc_spironolocatone\n0.0\n\n\ndem_age\n0.0\n\n\neventtime\n0.0\n\n\nstatus\n0.0",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Missingness generation</span>"
    ]
  },
  {
    "objectID": "scripts/02_missingness_generation.html#step-3-computing-a-scaled-weighted-sum-score-wss",
    "href": "scripts/02_missingness_generation.html#step-3-computing-a-scaled-weighted-sum-score-wss",
    "title": "2  Missingness generation",
    "section": "2.4 Step 3: Computing a (scaled) weighted sum score (wss)",
    "text": "2.4 Step 3: Computing a (scaled) weighted sum score (wss)\nThe way mice::ampute eventually computes the probability of an individual \\(i\\) to have an observed or missing \\(Z2\\) is calculated using a weighted sum score.\n\nmice::ampute documentation: A weighted sum score is simply the outcome of a linear regression equation where the coefficients are the values of the weights matrix. When data row i is a candidate for pattern k, the weighted sum score is therefore: \\[\\begin{equation*}\nwss_i = w_{k,1} \\cdot y_{1,i} + w_{k,2} \\cdot y_{2,i} + ... + w_{k,m} \\cdot y_{m,i},\n\\end{equation*}\\]\n\nwhere \\({y_{1,i},y_{2,i},...,y_{m,i}}\\) is the set of variable values of case i and \\({w_{k,1},w_{k,2},...,w_{k,m}}\\) are the pre-specified weights on row k of the weights matrix.\nIn our example, m=2 and k∈{1} because there are two variable \\(Z2\\) and \\(U\\) with a single missing data pattern.\nThe weighted sum score is additionally scaled using the scale function.\n\n\\[wss_{scaled} = \\frac{wss - \\bar{wss}}{sd_{wss}}\\]",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Missingness generation</span>"
    ]
  },
  {
    "objectID": "scripts/02_missingness_generation.html#step-4-converting-wss-to-probabilities",
    "href": "scripts/02_missingness_generation.html#step-4-converting-wss-to-probabilities",
    "title": "2  Missingness generation",
    "section": "2.5 Step 4: Converting wss to probabilities",
    "text": "2.5 Step 4: Converting wss to probabilities\n\n2.5.1 Discrete probabilities based on continuous weighted sum score quantiles\nAn alternative to using the ampute() default different logistic probability distributions to map the weighted sum scores to a missingness probablity is to use discrete probabilities as described in Brand (1999, pp. 110-113). The weighted sum scores of all patients are divided over a certain number of equally sized groups, or quantiles. An odds value defines the relative probability of each quantile group of becoming incomplete. In the following example, the weighted sum scores are divided over 4 groups/quantile with the highest quantile having a four-fold odds of having a missing value for \\(Z2\\).\n\n\nShow the code\n# replace the predictor columns with a 1 or non-zero value\nodds &lt;- c(1, 2, 3, 4)\n\nset.seed(42)\ndata_miss &lt;- mice::ampute(\n  data = cohort,\n  prop = 0.5,\n  mech = \"MAR\",\n  patterns = pattern,\n  weights = weights,\n  bycases = TRUE,\n  cont = FALSE,\n  odds = odds\n  )\n\nwss &lt;- cohort |&gt; \n  mutate(wss = unlist(data_miss$scores)) |&gt; \n  mutate(quantile = ntile(x = wss, n = 4)) |&gt; \n  mutate(isNA = is.na(data_miss$amp$Z2))\n\nquantile &lt;- ggplot(wss, aes(x = wss, y = quantile, color = factor(isNA))) +\n  geom_point(alpha = 0.1) +\n  labs(\n    x = \"Standardized weighted sum score (wss)\", \n    y = \"Quantile\",\n    color = \"Is NA\"\n    ) +\n  theme_bw() +\n  scale_color_colorblind() +\n  theme(legend.position = \"top\")\n\nquantile\n\n\n\n\n\n\n\n\nFigure 2.1: Imposed missingness based on scaled weighted sum score and corresponding quantile membership.\n\n\n\n\n\n\n\nShow the code\nodds_fit &lt;- glm(\n  isNA ~ wss,\n  data = wss,\n  family = \"binomial\"\n  )\n\nwss &lt;- wss |&gt; \n   mutate(probabilities = fitted(odds_fit))\n\nprobability &lt;- ggplot(wss, aes(x = wss, y = probabilities, color = factor(isNA))) +\n  geom_point(alpha = 0.1) +\n  labs(\n    x = \"Standardized weighted sum score (wss)\", \n    y = \"Probability\",\n    color = \"Is NA\"\n    ) +\n  theme_bw() +\n  scale_color_colorblind() +\n  theme(legend.position = \"top\")\n\nprobability\n\n\n\n\n\n\n\n\nFigure 2.2: Imposed missingness based on scaled weighted sum score and corresponding missingness probability.\n\n\n\n\n\n\n\nShow the code\nlibrary(cowplot)\n\n\n\nAttaching package: 'cowplot'\n\n\nThe following object is masked from 'package:ggthemes':\n\n    theme_map\n\n\nShow the code\nplot_grid(quantile, probability)\n\n\n\n\n\n\n\n\nFigure 2.3: Combined figures.",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Missingness generation</span>"
    ]
  },
  {
    "objectID": "scripts/02_missingness_generation.html#session-info",
    "href": "scripts/02_missingness_generation.html#session-info",
    "title": "2  Missingness generation",
    "section": "2.6 Session info",
    "text": "2.6 Session info\nScript runtime: 0.10 minutes.\n\nLoaded packagesSession infoRepositories\n\n\n\n\nShow the code\npander::pander(subset(data.frame(sessioninfo::package_info()), attached==TRUE, c(package, loadedversion)))\n\n\n\n\n\n\n\n\n\n\n \npackage\nloadedversion\n\n\n\n\narrow\narrow\n14.0.0.2\n\n\ncowplot\ncowplot\n1.1.3\n\n\ndplyr\ndplyr\n1.1.4\n\n\nggplot2\nggplot2\n3.4.4\n\n\nggsurvfit\nggsurvfit\n1.0.0\n\n\nggthemes\nggthemes\n5.1.0\n\n\ngt\ngt\n0.10.1\n\n\ngtools\ngtools\n3.9.5\n\n\ngtsummary\ngtsummary\n1.7.2\n\n\nhere\nhere\n1.0.1\n\n\nmice\nmice\n3.16.0\n\n\nsurvival\nsurvival\n3.5-8\n\n\ntictoc\ntictoc\n1.2\n\n\n\n\n\n\n\n\n\nShow the code\npander::pander(sessionInfo())\n\n\nR version 4.4.0 (2024-04-24)\nPlatform: x86_64-pc-linux-gnu\nlocale: LC_CTYPE=C.UTF-8, LC_NUMERIC=C, LC_TIME=C.UTF-8, LC_COLLATE=C.UTF-8, LC_MONETARY=C.UTF-8, LC_MESSAGES=C.UTF-8, LC_PAPER=C.UTF-8, LC_NAME=C, LC_ADDRESS=C, LC_TELEPHONE=C, LC_MEASUREMENT=C.UTF-8 and LC_IDENTIFICATION=C\nattached base packages: stats, graphics, grDevices, datasets, utils, methods and base\nother attached packages: cowplot(v.1.1.3), tictoc(v.1.2), mice(v.3.16.0), gtools(v.3.9.5), ggthemes(v.5.1.0), gtsummary(v.1.7.2), gt(v.0.10.1), ggplot2(v.3.4.4), ggsurvfit(v.1.0.0), survival(v.3.5-8), dplyr(v.1.1.4), arrow(v.14.0.0.2) and here(v.1.0.1)\nloaded via a namespace (and not attached): gtable(v.0.3.4), shape(v.1.4.6), xfun(v.0.41), htmlwidgets(v.1.6.4), lattice(v.0.22-5), simsurv(v.1.0.0), vctrs(v.0.6.5), tools(v.4.4.0), generics(v.0.1.3), tibble(v.3.2.1), fansi(v.1.0.6), pan(v.1.9), pkgconfig(v.2.0.3), jomo(v.2.7-6), Matrix(v.1.6-4), assertthat(v.0.2.1), lifecycle(v.1.0.4), farver(v.2.1.1), compiler(v.4.4.0), stringr(v.1.5.1), munsell(v.0.5.0), codetools(v.0.2-19), sass(v.0.4.8), htmltools(v.0.5.7), yaml(v.2.3.8), glmnet(v.4.1-8), nloptr(v.2.0.3), pillar(v.1.9.0), tidyr(v.1.3.1), MASS(v.7.3-60), broom.helpers(v.1.14.0), sessioninfo(v.1.2.2), iterators(v.1.0.14), rpart(v.4.1.23), boot(v.1.3-28.1), foreach(v.1.5.2), mitml(v.0.4-5), nlme(v.3.1-164), commonmark(v.1.9.1), tidyselect(v.1.2.0), digest(v.0.6.33), stringi(v.1.8.3), pander(v.0.6.5), purrr(v.1.0.2), labeling(v.0.4.3), forcats(v.1.0.0), splines(v.4.4.0), rprojroot(v.2.0.4), fastmap(v.1.1.1), grid(v.4.4.0), colorspace(v.2.1-0), cli(v.3.6.2), magrittr(v.2.0.3), utf8(v.1.2.4), broom(v.1.0.5), withr(v.3.0.0), scales(v.1.3.0), backports(v.1.4.1), bit64(v.4.0.5), rmarkdown(v.2.28), nnet(v.7.3-19), bit(v.4.0.5), lme4(v.1.1-35.1), evaluate(v.0.23), knitr(v.1.45), markdown(v.1.12), rlang(v.1.1.2), Rcpp(v.1.0.12), glue(v.1.6.2), xml2(v.1.3.6), renv(v.1.0.3), minqa(v.1.2.6), jsonlite(v.1.8.8) and R6(v.2.5.1)\n\n\n\n\n\n\nShow the code\npander::pander(options('repos'))\n\n\n\nrepos:\n\n\n\n\n\n\nREPO_NAME\n\n\n\n\nhttps://packagemanager.posit.co/cran/latest",
    "crumbs": [
      "Data generation background",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Missingness generation</span>"
    ]
  },
  {
    "objectID": "scripts/03_run_simulation.html",
    "href": "scripts/03_run_simulation.html",
    "title": "3  Simple de novo simulation",
    "section": "",
    "text": "3.1 Objective\nIn this section, we will generate 1000 following different missingness scenarios.\n# define column numbers for pattern and weight determination\ncol_Z2 &lt;- which(colnames(mock_cohort) %in% \"Z2\")\ncol_U &lt;- which(colnames(mock_cohort) %in% \"U\")\n\n# define missingness pattern\ndefault_pattern &lt;- rep(1, ncol(mock_cohort))\npattern &lt;- replace(default_pattern, col_Z2, 0)\n\n# define weights \ndefault_weights &lt;- rep(0, ncol(mock_cohort))\nweights &lt;- replace(default_weights, c(col_Z2, col_U), c(0.2, 0.8))\n\nprop &lt;- 0.5",
    "crumbs": [
      "Simulation",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Simple de novo simulation</span>"
    ]
  },
  {
    "objectID": "scripts/03_run_simulation.html#continuous-distribution-probabilities",
    "href": "scripts/03_run_simulation.html#continuous-distribution-probabilities",
    "title": "3  Simple de novo simulation",
    "section": "3.2 Continuous distribution probabilities",
    "text": "3.2 Continuous distribution probabilities\nProbabilities are based on a continuous distribution.\n\ntic(msg = \"Simulation based on continuous distribution\")\n\nresults &lt;- parallel::mclapply(\n  X = 1:n_replicates,\n  FUN = run_simulation,\n  pattern = pattern,\n  weights = weights,\n  type = \"RIGHT\",\n  prop = prop,\n  mc.cores = parallel::detectCores()-1\n  ) \n  \nresults_cont &lt;- do.call(rbind, results) |&gt; \n  mutate(simulation = \"Continuous distribution (RIGHT)\")\n\ntoc()\n\nSimulation based on continuous distribution: 1466.009 sec elapsed",
    "crumbs": [
      "Simulation",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Simple de novo simulation</span>"
    ]
  },
  {
    "objectID": "scripts/03_run_simulation.html#discrete-distribution-probabilities",
    "href": "scripts/03_run_simulation.html#discrete-distribution-probabilities",
    "title": "3  Simple de novo simulation",
    "section": "3.3 Discrete distribution probabilities",
    "text": "3.3 Discrete distribution probabilities\nProbabilities are based on a discrete distribution.\n\ntic(msg = \"Simulation based on discrete distribution\")\n\nodds &lt;- c(1, 2, 3, 4)\n\nresults &lt;- parallel::mclapply(\n  X = 1:n_replicates,\n  FUN = run_simulation,\n  pattern = pattern,\n  weights = weights,\n  odds = odds,\n  prop = prop,\n  mc.cores = parallel::detectCores()-1\n  ) \n  \nresults_odds &lt;- do.call(rbind, results) |&gt; \n  mutate(simulation = paste0(\"Discrete odds (\", paste0(odds, collapse = \", \"), \")\"))\n\ntoc()\n\nSimulation based on discrete distribution: 1454.245 sec elapsed",
    "crumbs": [
      "Simulation",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Simple de novo simulation</span>"
    ]
  },
  {
    "objectID": "scripts/03_run_simulation.html#save-simulation-results",
    "href": "scripts/03_run_simulation.html#save-simulation-results",
    "title": "3  Simple de novo simulation",
    "section": "3.4 Save simulation results",
    "text": "3.4 Save simulation results\n\nresults &lt;- rbind(results_cont, results_odds) |&gt; \n  mutate(method = factor(method, levels = c(\n    \"Unadjusted\", \n    \"Complete case\", \n    \"Imputed\"))\n    )",
    "crumbs": [
      "Simulation",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Simple de novo simulation</span>"
    ]
  },
  {
    "objectID": "scripts/03_run_simulation.html#results",
    "href": "scripts/03_run_simulation.html#results",
    "title": "3  Simple de novo simulation",
    "section": "3.5 Results",
    "text": "3.5 Results\nThe next steps of this script analyze the raw simulation results obtained in the previous script via run_simulation.R. The last run on 2024-10-28 18:47:31.045776.",
    "crumbs": [
      "Simulation",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Simple de novo simulation</span>"
    ]
  },
  {
    "objectID": "scripts/03_run_simulation.html#read-raw-results-table",
    "href": "scripts/03_run_simulation.html#read-raw-results-table",
    "title": "3  Simple de novo simulation",
    "section": "3.6 Read raw results table",
    "text": "3.6 Read raw results table\nWe first look at the results table with the raw simulation results.\n\nresults |&gt; \n  glimpse()\n\nRows: 6,000\nColumns: 5\n$ method     &lt;fct&gt; Unadjusted, Complete case, Imputed, Unadjusted, Complete ca…\n$ estimate   &lt;dbl&gt; 1.2629630, 0.8932111, 0.9111699, 1.1150121, 0.8824297, 1.03…\n$ se         &lt;dbl&gt; 0.07923421, 0.13274238, 0.10924959, 0.07479571, 0.11677905,…\n$ replicate  &lt;int&gt; 1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6, 6, 6, 7, 7,…\n$ simulation &lt;chr&gt; \"Continuous distribution (RIGHT)\", \"Continuous distribution…",
    "crumbs": [
      "Simulation",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Simple de novo simulation</span>"
    ]
  },
  {
    "objectID": "scripts/03_run_simulation.html#qc",
    "href": "scripts/03_run_simulation.html#qc",
    "title": "3  Simple de novo simulation",
    "section": "3.7 QC",
    "text": "3.7 QC\nLet’s do a few quality/sanity checks.\n\nNumber of analysis methods\n\n\nunique(results$method)\n\n[1] Unadjusted    Complete case Imputed      \nLevels: Unadjusted Complete case Imputed\n\n\n\nAssert that there are no missing results\n\n\nassert_that(!any(sapply(results$estimate, is.na)), msg = \"There are missing estimates\")\n\n[1] TRUE\n\nassert_that(!any(sapply(results$se, is.na)), msg = \"There are missing standard errors\")\n\n[1] TRUE",
    "crumbs": [
      "Simulation",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Simple de novo simulation</span>"
    ]
  },
  {
    "objectID": "scripts/03_run_simulation.html#main-results",
    "href": "scripts/03_run_simulation.html#main-results",
    "title": "3  Simple de novo simulation",
    "section": "3.8 Main results",
    "text": "3.8 Main results\n\n# call helper functions\nsource(here::here(\"functions\", \"rsimsum_ggplot.R\"))\n\nFor the analysis of aggregate simulation results we use the rsimsum package. More information about this package can be found here.[@rsimsum]\n\nsimsum_out &lt;- simsum(\n  data = results, \n  estvarname = \"estimate\", \n  se = \"se\", \n  true = 1, \n  by = \"simulation\",\n  methodvar = \"method\", \n  ref = \"Complete case\"\n  ) |&gt; \n  summary() |&gt; \n  tidy()\n\n\nHazard ratio distributionHazard ratio distribution (interactive)\n\n\n\nhr_distribution &lt;- results |&gt; \n  ggplot(aes(x = method, y = estimate)) +\n  geom_boxplot(outlier.colour = \"red\") +\n  geom_point(position = position_jitter(seed = 42), alpha = 0.15) +\n  geom_hline(yintercept = 1.0, color = \"forestgreen\", linetype = \"dashed\") +\n  labs(\n    x = \"Method\",\n    y = \"Hazard ratio (HR)\"\n    ) +\n  theme_bw() +\n  theme(\n    axis.title.x = element_blank(),\n    axis.text.x = element_text(angle = 35, vjust = 1, hjust=1)\n    ) +\n  facet_wrap(~simulation)\n\nhr_distribution\n\n\n\n\n\n\n\nFigure 3.1: Hazard ratio distribution by method across all simulated datasets.\n\n\n\n\n\n\n\n\nggplotly(hr_distribution)\n\n\n\n\n\n\n\n\n\n3.8.1 Root mean squared error (RMSE)\n\nrmse &lt;- rsimsum_ggplot(tidy_simsum = simsum_out, metric = \"rmse\")\n\n\nPlotTable\n\n\n\nrmse$plot\n\n\n\n\n\n\n\nFigure 3.2: Root mean squared error by method.\n\n\n\n\n\n\n\n\nrmse$table |&gt; \n  gt()\n\n\n\nTable 3.1: Root mean squared error by method.\n\n\n\n\n\n\n\n\n\nmethod\nest\nlower\nupper\n\n\n\n\nContinuous distribution (RIGHT)\n\n\nUnadjusted\n0.207\n0.200\n0.213\n\n\nComplete case\n0.187\n0.178\n0.196\n\n\nImputed\n0.163\n0.156\n0.170\n\n\nDiscrete odds (1, 2, 3, 4)\n\n\nUnadjusted\n0.207\n0.200\n0.213\n\n\nComplete case\n0.201\n0.188\n0.212\n\n\nImputed\n0.129\n0.121\n0.136\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n3.8.2 Bias\n\nbias &lt;- rsimsum_ggplot(tidy_simsum = simsum_out, metric = \"bias\")\n\n\nPlotTable\n\n\n\nbias$plot\n\n\n\n\n\n\n\nFigure 3.3: Bias by method.\n\n\n\n\n\n\n\n\nbias$table |&gt; \n  gt()\n\n\n\nTable 3.2: Bias by method.\n\n\n\n\n\n\n\n\n\nmethod\nest\nlower\nupper\n\n\n\n\nContinuous distribution (RIGHT)\n\n\nUnadjusted\n0.184\n0.178\n0.189\n\n\nComplete case\n0.103\n0.093\n0.113\n\n\nImputed\n0.100\n0.092\n0.108\n\n\nDiscrete odds (1, 2, 3, 4)\n\n\nUnadjusted\n0.184\n0.178\n0.189\n\n\nComplete case\n0.102\n0.091\n0.113\n\n\nImputed\n0.058\n0.051\n0.065\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n3.8.3 Coverage\n\ncoverage &lt;- rsimsum_ggplot(tidy_simsum = simsum_out, metric = \"coverage\")\n\n\nPlotTable\n\n\n\ncoverage$plot\n\n\n\n\n\n\n\nFigure 3.4: Coverage by method.\n\n\n\n\n\n\n\n\ncoverage$table |&gt; \n  gt()\n\n\n\nTable 3.3: Coverage by method.\n\n\n\n\n\n\n\n\n\nmethod\nest\nlower\nupper\n\n\n\n\nContinuous distribution (RIGHT)\n\n\nUnadjusted\n0.387\n0.357\n0.417\n\n\nComplete case\n0.819\n0.795\n0.843\n\n\nImputed\n0.844\n0.822\n0.866\n\n\nDiscrete odds (1, 2, 3, 4)\n\n\nUnadjusted\n0.387\n0.357\n0.417\n\n\nComplete case\n0.842\n0.819\n0.865\n\n\nImputed\n0.938\n0.923\n0.953\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n3.8.4 Empirical standard error\n\nempse &lt;- rsimsum_ggplot(tidy_simsum = simsum_out, metric = \"empse\")\n\n\nPlotTable\n\n\n\nempse$plot\n\n\n\n\n\n\n\nFigure 3.5: Empirical standard error by method.\n\n\n\n\n\n\n\n\nempse$table |&gt; \n  gt()\n\n\n\nTable 3.4: Empirical standard error by method.\n\n\n\n\n\n\n\n\n\nmethod\nest\nlower\nupper\n\n\n\n\nContinuous distribution (RIGHT)\n\n\nUnadjusted\n0.095\n0.091\n0.099\n\n\nComplete case\n0.157\n0.150\n0.163\n\n\nImputed\n0.129\n0.123\n0.135\n\n\nDiscrete odds (1, 2, 3, 4)\n\n\nUnadjusted\n0.095\n0.091\n0.099\n\n\nComplete case\n0.173\n0.165\n0.180\n\n\nImputed\n0.115\n0.110\n0.120",
    "crumbs": [
      "Simulation",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Simple de novo simulation</span>"
    ]
  },
  {
    "objectID": "scripts/03_run_simulation.html#session-info",
    "href": "scripts/03_run_simulation.html#session-info",
    "title": "3  Simple de novo simulation",
    "section": "3.9 Session info",
    "text": "3.9 Session info\nTotal script runtime: 48.73 minutes.\n\nLoaded packagesSession infoRepositories\n\n\n\npander::pander(subset(data.frame(sessioninfo::package_info()), attached==TRUE, c(package, loadedversion)))\n\n\n\n\n\n\n\n\n\n \npackage\nloadedversion\n\n\n\n\nassertthat\nassertthat\n0.2.1\n\n\ndplyr\ndplyr\n1.1.4\n\n\nggplot2\nggplot2\n3.4.4\n\n\ngt\ngt\n0.10.1\n\n\nhere\nhere\n1.0.1\n\n\nplotly\nplotly\n4.10.4\n\n\nrsimsum\nrsimsum\n0.11.3\n\n\ntictoc\ntictoc\n1.2\n\n\ntidyr\ntidyr\n1.3.1\n\n\n\n\n\n\n\n\npander::pander(sessionInfo())\n\nR version 4.4.0 (2024-04-24)\nPlatform: x86_64-pc-linux-gnu\nlocale: LC_CTYPE=C.UTF-8, LC_NUMERIC=C, LC_TIME=C.UTF-8, LC_COLLATE=C.UTF-8, LC_MONETARY=C.UTF-8, LC_MESSAGES=C.UTF-8, LC_PAPER=C.UTF-8, LC_NAME=C, LC_ADDRESS=C, LC_TELEPHONE=C, LC_MEASUREMENT=C.UTF-8 and LC_IDENTIFICATION=C\nattached base packages: parallel, stats, graphics, grDevices, datasets, utils, methods and base\nother attached packages: plotly(v.4.10.4), tidyr(v.1.3.1), assertthat(v.0.2.1), rsimsum(v.0.11.3), gt(v.0.10.1), ggplot2(v.3.4.4), tictoc(v.1.2), dplyr(v.1.1.4) and here(v.1.0.1)\nloaded via a namespace (and not attached): sass(v.0.4.8), utf8(v.1.2.4), generics(v.0.1.3), renv(v.1.0.3), xml2(v.1.3.6), digest(v.0.6.33), magrittr(v.2.0.3), evaluate(v.0.23), grid(v.4.4.0), fastmap(v.1.1.1), rprojroot(v.2.0.4), jsonlite(v.1.8.8), sessioninfo(v.1.2.2), backports(v.1.4.1), httr(v.1.4.7), pander(v.0.6.5), purrr(v.1.0.2), fansi(v.1.0.6), crosstalk(v.1.2.1), viridisLite(v.0.4.2), scales(v.1.3.0), lazyeval(v.0.2.2), cli(v.3.6.2), rlang(v.1.1.2), ellipsis(v.0.3.2), munsell(v.0.5.0), withr(v.3.0.0), yaml(v.2.3.8), tools(v.4.4.0), checkmate(v.2.3.1), colorspace(v.2.1-0), vctrs(v.0.6.5), R6(v.2.5.1), ggridges(v.0.5.6), lifecycle(v.1.0.4), htmlwidgets(v.1.6.4), simsurv(v.1.0.0), pkgconfig(v.2.0.3), pillar(v.1.9.0), gtable(v.0.3.4), Rcpp(v.1.0.12), glue(v.1.6.2), data.table(v.1.15.0), xfun(v.0.41), tibble(v.3.2.1), tidyselect(v.1.2.0), knitr(v.1.45), farver(v.2.1.1), htmltools(v.0.5.7), rmarkdown(v.2.28), labeling(v.0.4.3) and compiler(v.4.4.0)\n\n\n\n\n\npander::pander(options('repos'))\n\n\nrepos:\n\n\n\n\n\n\nREPO_NAME\n\n\n\n\nhttps://packagemanager.posit.co/cran/latest",
    "crumbs": [
      "Simulation",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Simple de novo simulation</span>"
    ]
  }
]